C51 COMPILER V9.54   MAIN                                                                  09/05/2023 10:14:32 PAGE 1   


C51 COMPILER V9.54, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\Objects\main.obj
COMPILER INVOKED BY: D:\Keil_C51v5\C51\BIN\C51.EXE main.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings\m
                    -ain.lst) OBJECT(.\Objects\main.obj)

line level    source

   1          #include <REGX52.H>
   2          #include "LCD1602.h"  
   3          #include "Delay.h"
   4            
   5          void timer0_init()
   6          {
   7   1              TMOD &= 0xF0;           //设置定时器模式
   8   1              TMOD |= 0x01;           //设置定时器模式
   9   1      //      TH0 = 64535/256;
  10   1      //      TL0 = 64535%256;
  11   1              TL0 = 0x18;             //设置定时初值
  12   1              TH0 = 0xFC;             //设置定时初值
  13   1              TF0 = 0;                //清除TF0标志
  14   1              TR0 = 1;                //定时器0开始计时
  15   1              ET0 = 1;
  16   1              EA = 1;
  17   1              PT0 = 0;
  18   1      }
  19          
  20          unsigned char mod=1, clear=1; // 暂停时间、重置时间
  21          unsigned int sec, min, hour;
  22          void main()
  23          {
  24   1              timer0_init();
  25   1              LCD_init();
*** WARNING C206 IN LINE 25 OF main.c: 'LCD_init': missing function-prototype
  26   1              LCD_ShowString(1, 1, "TIME CLOCK NOW:");
  27   1              LCD_ShowString(2, 3, ":  :");
  28   1              
  29   1              while(1){
  30   2                      if(P3_1==0){Delay(20);while(P3_1==0);Delay(20);
  31   3                              if (mod == 0) {
  32   4                                      mod = 1;
  33   4                              }else{
  34   4                                      mod = 0;
  35   4                              }
  36   3                      };
  37   2                      if(P3_0==0){Delay(20);while(P3_0==0);Delay(20);clear = 0;};
  38   2                      LCD_ShowNum(2, 1, hour, 2);
  39   2                      LCD_ShowNum(2, 4, min, 2);
  40   2                      LCD_ShowNum(2, 7, sec, 2);
  41   2              }
  42   1      }
  43          
  44          void timer0_routine() interrupt 1
  45          {
  46   1              static unsigned int count;
  47   1              TL0 = 0x18;             //设置定时初值
  48   1              TH0 = 0xFC;
  49   1              count++;
  50   1              
  51   1              
  52   1              if (count >= 1000){
  53   2                      count = 0;
C51 COMPILER V9.54   MAIN                                                                  09/05/2023 10:14:32 PAGE 2   

  54   2                      
  55   2                      if(clear == 0){
  56   3                              sec = 0;
  57   3                              min = 0;
  58   3                              hour = 0;
  59   3                              clear = 1;
  60   3                      }
  61   2                      if (mod == 1){                  
  62   3                              sec++;
  63   3                      }
  64   2                      if (sec >= 60){
  65   3                              sec = 0;
  66   3                              min++;
  67   3                              if(min >= 60){
  68   4                                      hour++;
  69   4                                      min = 0;
  70   4                                      if(hour >=24){
  71   5                                              hour = 0;
  72   5                                      }
  73   4                              }
  74   3                      }               
  75   2              }
  76   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    285    ----
   CONSTANT SIZE    =     21    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     10    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  1 WARNING(S),  0 ERROR(S)
